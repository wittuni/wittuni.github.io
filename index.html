<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-i18n="pageTitle">tttiw.github.io</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>
</head>

<body>
<div class="container">
    <!-- Main Card -->
    <div class="card hero-card">
        <button
                type="button"
                class="action-button"
                tabindex="0"
                data-i18n="confetti">
        </button>

        <h2 data-i18n="title"></h2>
        <p data-i18n="mainText"></p>

        <!-- Accessibility Section -->
        <div class="accessibility-section">
            <p data-i18n="accessibility"></p>
            <div class="language-selector-wrapper">
                <label>
                    <select id="language-selector"
                            class="language-selector">
                        <option value="en" data-i18n="languages.english">English</option>
                        <option value="zh" data-i18n="languages.chinese">现代汉语</option>
                    </select>
                </label>
                <div class="select-arrow"></div>
            </div>

            <!-- 颜色选择器 -->
            <div class="color-theme-selector">
                <button class="color-button color-button-red" data-color="#4b2328"></button>
                <button class="color-button color-button-yellow" data-color="#a86800"></button>
                <button class="color-button color-button-green" data-color="#395a57"></button>
                <button class="color-button color-button-lavender" data-color="#4e4466"></button>
                <button class="color-button color-button-dark" data-color="#1a1a1a"></button>
            </div>

        </div>
    </div>

    <div class="card-grid">

        <div class="card">
            <!--      <div class="glass-image-container">-->
            <!--        <img src="images/witt-s-calculator.jpg" class="card-image">-->
            <!--        <div class="glass-overlay"></div>-->
            <!--      </div>-->
            <div class="glass-image-container-gradient-bg">
            </div>
            <h3 data-i18n="weixin.title"></h3>
            <p data-i18n="weixin.description"></p>

            <button class="button-link initial-state"
                    data-target-url="https://mp.weixin.qq.com/s/b6wxfJ-ndgf0hpJa0fnrGQ"
            >
                <span data-i18n="visit"></span>
            </button>

            <div class="tags-container">
                <span class="tag tag-grey">Personal Project</span>
            </div>

        </div>

        <div class="card image-card">
            <!-- 图片背景 -->
            <div class="card-img-background" style="background-image: url('images/witt-s-calculator.jpg');"></div>
            <!-- 毛玻璃效果 -->
            <div class="glass-overlay"></div>
            <!-- 底部白色信息卡 -->
            <div class="info-box">
                <h3 data-i18n="ws_calc.title"></h3>
                <p data-i18n="ws_calc.description"></p>

                <button class="button-link initial-state"
                        data-target-url="https://github.com/tttiw/witt-s-calculator/releases/tag/Beta-1.0"
                >
                    <span data-i18n="download"></span>
                </button>

                <div class="tags-container">
                    <span class="tag tag-green">Python</span>
                    <span class="tag tag-red">Apache 2.0</span>
                    <span class="tag tag-blue">Beta</span>
                </div>

            </div>
        </div>

        <div class="card">
            <h3 data-i18n="ws_calc_uu.title"></h3>
            <p data-i18n="ws_calc_uu.description"></p>
        </div>

        <div class="card">
            <div class="glass-image-container-gradient-yp">
            </div>
            <h3 data-i18n="game.title"></h3>
            <p data-i18n="game.description"></p>
            <div class="tags-container">
                <span class="tag tag-yellow">C#</span>
                <span class="tag tag-grey">TBA</span>
            </div>
        </div>

        <div class="card">
            <h3 data-i18n="about_me.title"></h3>

            <div class="image-container">
                <img src="images/Temperate_Cow.png" class="float-left mirror-flip" alt="minecraft cow">
                <img src="images/Cute_Fishron_Mount.webp" class="float-right mirror-flip" alt="cute fishron">
            </div>
            <div style="clear: both;"></div>

            <p data-i18n="about_me.description"></p>
            <table class="themed-table">
                <thead>

                <tr>
                    <th data-i18n="about_me.fav_table.l1r1"></th>
                    <th data-i18n="about_me.fav_table.l1r2"></th>
                </tr>
                </thead>
                <tbody>

                <tr>
                    <td data-i18n="about_me.fav_table.l2r1"></td>
                    <td data-i18n="about_me.fav_table.l2r2"></td>
                </tr>

                <tr>
                    <td data-i18n="about_me.fav_table.l3r1"></td>
                    <td data-i18n="about_me.fav_table.l3r2"></td>
                </tr>

                <tr>
                    <td data-i18n="about_me.fav_table.l4r1"></td>
                    <td data-i18n="about_me.fav_table.l4r2"></td>
                </tr>

                <tr>
                    <td data-i18n="about_me.fav_table.l5r1"></td>
                    <td data-i18n="about_me.fav_table.l5r2"></td>
                </tr>

                </tbody>

            </table>
        </div>

        <div class="card">
            <h3 data-i18n="links.title"></h3>
            <p><span class="code-inline">placeholder@placeholder.org</span><span class="code-inline">placeholderplaceholderplaceholderplaceholderplaceholderplaceholder@placeholder.org</span>
            </p>
            <div class="modern-divider"></div>

            <div class="buttons-container">

                <button class="button-link initial-state" data-target-url="https://zeyi2.github.io">
                    <span>Mitchell's Homepage</span>
                </button>

                <button class="button-link initial-state" data-target-url="https://example.com/">
                    <span>Placeholder 1</span>
                </button>

                <button class="button-link initial-state" data-target-url="https://example.com/">
                    <span>PH2</span>
                </button>

                <button class="button-link initial-state" data-target-url="original_website.html">
                    <span>???</span>
                </button>

            </div>

        </div>

        <div class="card">
            <h3 data-i18n="issues.title"></h3>
            <p data-i18n="issues.description"></p>
            <button class="button-link initial-state"
                    data-target-url="https://github.com/tttiw/tttiw.github.io/issues">
                <span data-i18n="issues.redirect"></span>
            </button>
        </div>

        <div class="card">
            <h3 data-i18n="credits.title"></h3>
            <p>By tttiw<br><span class="code-inline">witt-s-calculator.jpg</span>by 3s.<br><br>Last edit: 2025/3<br>v7.6.5
            </p>
            <div class="modern-divider"></div>
            <div class="switch-container">
                <label class="switch-label" data-i18n="unlimited_confetti"></label>
                <label class="switch">
                    <input type="checkbox" id="cooldown-toggle">
                    <span class="slider round"></span>
                </label>
            </div>

        </div>

    </div>
</div>

<!-- 本地化 -->
<script src="js/i18n.js"></script>

<script>
    // 主题切换
    document.addEventListener('DOMContentLoaded', function () {
        const colorButtons = document.querySelectorAll('.color-button');
        const redButton = document.querySelector('.color-button-red');
        redButton.classList.add('active');

        colorButtons.forEach(button => {
            button.addEventListener('click', function () {
                colorButtons.forEach(btn => btn.classList.remove('active'));
                this.classList.add('active');
                const color = this.getAttribute('data-color');
                document.body.style.backgroundColor = color;
                localStorage.setItem('preferredTheme', color);
            });
        });

        const savedTheme = localStorage.getItem('preferredTheme');
        if (savedTheme) {
            document.body.style.backgroundColor = savedTheme;
            // 找到对应按钮并激活
            colorButtons.forEach(btn => {
                if (btn.getAttribute('data-color') === savedTheme) {
                    colorButtons.forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');
                }
            });
        }
    });
</script>

<script>
    //跳转确认按钮
    document.addEventListener('DOMContentLoaded', function () {
        // 获取所有按钮
        const buttons = document.querySelectorAll('.button-link');

        buttons.forEach(button => {
            let clickState = 0; // 0: 初始状态，1: 半填充状态，2: 确认状态
            let isTransitioning = false;

            const targetUrl = button.getAttribute('data-target-url') || 'original_website.html';

            button.addEventListener('click', function (event) {
                event.preventDefault();

                if (isTransitioning) {
                    return;
                }

                if (clickState === 0) {
                    button.classList.remove('initial-state');
                    button.classList.add('half-filled');
                    clickState = 1;
                } else if (clickState === 1) {
                    button.classList.remove('half-filled');
                    button.classList.add('fully-filled');
                    clickState = 2;
                    isTransitioning = true;

                    setTimeout(function () {
                        button.classList.remove('fully-filled');
                        button.classList.add('initial-state');
                        clickState = 0;
                        // 监听过渡动画结束事件
                        const transitionEndHandler = function() {
                            // 移除事件监听器
                            button.removeEventListener('transitionend', transitionEndHandler);
                            isTransitioning = false
                            window.location.href = targetUrl;
                        };
                        button.addEventListener('transitionend', transitionEndHandler);
                    }, 700);


                }
            });

            document.addEventListener('click', function (event) {
                if (clickState === 1 && !button.contains(event.target)) {
                    // 半填充状态且点击按钮外部时重置
                    button.classList.remove('half-filled');
                    button.classList.add('initial-state');
                    clickState = 0;
                }
            });
        });
    });
</script>

<script>

    let cooldownEnabled = true;

    document.getElementById('cooldown-toggle').addEventListener('change', function () {
        cooldownEnabled = !this.checked; // 选中表示关闭冷却
    });

    document.querySelector('.action-button').addEventListener('click', function () {

        if (cooldownEnabled) {
            if (this.disabled) return;
            this.disabled = true;
            this.classList.add('disabled');
        }

        const duration = 2000;
        const end = Date.now() + duration;
        const button = this;

        function frame() {
            // 在页面宽度范围内随机发射confetti
            confetti({
                particleCount: 7, // 每次发射的数量
                angle: 60, // 左侧斜向下
                spread: 55,
                origin: {x: 0}, // 页面最左边
                y: 0,  // 页面最上方
                gravity: 2.5,
                scalar: 0.7,
                drift: 0,
                ticks: 150,
                colors: ['#E1306C', '#F56040', '#FCAF45', '#405DE6', '#5851DB'],
            });

            confetti({
                particleCount: 7,
                angle: 120,
                spread: 55,
                origin: {x: 1},
                y: 0,
                gravity: 2.5,
                scalar: 0.7,
                drift: 0,
                ticks: 150,
                colors: ['#E1306C', '#F56040', '#FCAF45', '#405DE6', '#5851DB'],
            });

            // confetti({
            //   particleCount: 10,
            //   angle: 90,
            //   spread: 60,
            //   origin: { x: 0.5 },
            //   y: 0,
            //   gravity: 2.5,
            //   scalar: 0.7,
            //   drift: 0,
            //   ticks: 150,
            //   colors: ['#E1306C', '#F56040', '#FCAF45', '#405DE6', '#5851DB'],
            // });

            // 如果时间未到，继续执行
            if (Date.now() < end) {
                requestAnimationFrame(frame);
            } else {
                if (cooldownEnabled) {
                    setTimeout(function () {
                        button.disabled = false;
                        button.classList.remove('disabled');
                    }, 500); // 500ms冷却时间
                }
            }
        }

        frame();
    });
</script>

</body>

</html>